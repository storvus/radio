<html lang="en">
    <head>
        <title>Radio Tohian</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="static/img/icon.png">
        <link href="static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="static/css/styles.css" rel="stylesheet" type="text/css">
    </head>
    <body class="bg-black">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-sm-12 offset-sm-0 col-lg-8 offset-lg-2 h-100 position-relative">
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <div class="header text-center">
                                <img src="static/img/bg.png" alt="On Air" />
                            </div>
                        </div>
                        <div class="col-12 col-md-8">
                            <div class="card p-5 bg-black">
                                <audio preload="none" controls src="https://stream.storv.us:9000/autodj" style="width: 100%">
                                    <source src="https://stream.storv.us:9000/autodj" />
                                </audio>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 d-none d-md-block"></div>
                        <div class="col-12 col-md-12 text-white text-center">
                            Currently playing: <span class="fst-italic" id="currently-playing"></span>
                        </div>
                    </div>
                    <footer class="text-white">
                        <div class="row">
                            <div class="col-12">
                                <span id="radio-info"></span>
                                <br />
                                &#169; Radio Tohian
                            </div>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            window.onload = function() {
                setInterval(() => {
                    fetch("https://icecast.storv.us/status-json.xsl")
                        .then(response => response.json())
                        .then((data) => {
                            document.getElementById("currently-playing").innerHTML = data.icestats.source.title
                            document.getElementById("radio-info").innerHTML = data.icestats.source.server_description
                        })
                }, 2000);
            }
        </script>
    </body>
</html>
